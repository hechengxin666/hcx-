<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº¤äº’å¼é¡¹ç›®è¿›åº¦è¡¨ï¼ˆæƒé™åˆ†çº§ç‰ˆï¼‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", Arial, sans-serif;
        }
        body {
            padding: 20px;
            background-color: #f5f7fa;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 30px;
        }
        h1 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 24px;
        }
        .intro {
            color: #4a5568;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        .auth-control {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f8fafc;
            border-radius: 6px;
            border: 1px solid #e2e8f0;
        }
        .auth-btn {
            padding: 8px 16px;
            background-color: #4299e1;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
        }
        .auth-btn:hover {
            background-color: #3182ce;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            padding: 12px 15px;
            text-align: left;
            border: 1px solid #e2e8f0;
        }
        th {
            background-color: #4299e1;
            color: #fff;
            font-weight: 600;
        }
        tr:nth-child(even) {
            background-color: #f8fafc;
        }
        tr:hover {
            background-color: #f1f5f9;
        }
        .task-parent {
            font-weight: 600;
            color: #2d3748;
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        .task-parent::before {
            content: "â–¼";
            font-size: 12px;
            margin-right: 8px;
            transition: transform 0.2s;
        }
        .task-parent.collapsed::before {
            transform: rotate(-90deg);
        }
        .task-child {
            padding-left: 30px !important;
            color: #4a5568;
        }
        input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        input[type="text"] {
            width: 60px;
            padding: 3px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
        }
        .callout {
            padding: 15px;
            background-color: #fef7ec;
            border-left: 4px solid #f6ad55;
            border-radius: 4px;
            color: #4a5568;
            line-height: 1.6;
        }
        .callout em {
            color: #718096;
            font-style: normal;
        }
        /* å®Œæˆä»»åŠ¡æ ·å¼ */
        .task-done {
            text-decoration: line-through;
            color: #718096;
        }
        /* æŸ¥çœ‹æ¨¡å¼æ ·å¼ */
        .view-mode input[type="checkbox"] {
            cursor: default;
            opacity: 0.7;
        }
        .view-mode input[type="text"] {
            background-color: #f1f5f9;
            color: #4a5568;
            border: none;
            pointer-events: none;
        }
        /* è¯¦æƒ…å¼¹çª—æ ·å¼ */
        .detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: #fff;
            border-radius: 8px;
            padding: 25px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }
        .modal-title {
            font-size: 18px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e2e8f0;
        }
        .modal-info {
            margin-bottom: 10px;
            color: #4a5568;
        }
        .modal-info span {
            font-weight: 600;
            color: #2d3748;
        }
        .close-modal {
            margin-top: 20px;
            padding: 8px 16px;
            background-color: #4299e1;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            float: right;
        }
        .close-modal:hover {
            background-color: #3182ce;
        }
        .auth-tip {
            color: #718096;
            font-size: 14px;
            margin-top: 5px;
        }
        /* é“¾æ¥åˆ†äº«æç¤ºæ ·å¼ */
        .share-tip {
            margin-top: 30px;
            padding: 20px;
            background-color: #e8f4f8;
            border-radius: 8px;
            border-left: 4px solid #4299e1;
        }
        .share-tip h3 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 16px;
        }
        .share-tip ul {
            margin-left: 20px;
            color: #4a5568;
            line-height: 1.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>äº¤äº’å¼é¡¹ç›®è¿›åº¦è¡¨ï¼ˆæƒé™åˆ†çº§ç‰ˆï¼‰</h1>
        <p class="intro">äº¤äº’æ“ä½œï¼š1. ç®¡ç†è€…å¯è§£é”ç¼–è¾‘æƒé™ï¼Œä»–äººé»˜è®¤ä»…æŸ¥çœ‹ï¼›2. ç‚¹å‡»ä¸€çº§ä»»åŠ¡åç§°å±•å¼€/æŠ˜å å­ä»»åŠ¡ï¼›3. ç‚¹å‡»ä»»åŠ¡è¡Œå¯æŸ¥çœ‹è¯¦æƒ…ã€‚</p>
        
        <!-- æƒé™æ§åˆ¶åŒºåŸŸ -->
        <div class="auth-control">
            <span>å½“å‰æ¨¡å¼ï¼š<strong id="authMode">ä»…æŸ¥çœ‹</strong></span>
            <button class="auth-btn" id="unlockBtn" onclick="unlockEdit()">ç®¡ç†è€…è§£é”ç¼–è¾‘</button>
            <p class="auth-tip">æç¤ºï¼šè§£é”åå¯ä¿®æ”¹è¿›åº¦ã€æ ‡è®°ä»»åŠ¡å®Œæˆï¼Œåˆ·æ–°é¡µé¢ä¿ç•™çŠ¶æ€</p>
        </div>

        <table id="taskTable" class="view-mode">
            <thead>
                <tr>
                    <th width="8%">å®ŒæˆçŠ¶æ€</th>
                    <th width="22%">ä»»åŠ¡åç§°</th>
                    <th width="15%">è´Ÿè´£äºº</th>
                    <th width="15%">è®¡åˆ’å¼€å§‹æ—¶é—´</th>
                    <th width="15%">è®¡åˆ’ç»“æŸæ—¶é—´</th>
                    <th width="12%">å®é™…è¿›åº¦</th>
                    <th width="13%">å¤‡æ³¨</th>
                </tr>
            </thead>
            <tbody>
                <!-- å¯åŠ¨é˜¶æ®µ -->
                <tr class="task-row" data-id="task1" data-name="ä¸€ã€é¡¹ç›®å¯åŠ¨é˜¶æ®µ" data-leader="é¡¹ç›®ç»ç†" data-start="2026-02-01" data-end="2026-02-10" data-progress="0%" data-remark="å®Œæˆåè¿›å…¥è§„åˆ’é˜¶æ®µ" data-status="æœªå®Œæˆ">
                    <td><input type="checkbox" class="parent-checkbox" data-target="stage1" disabled></td>
                    <td class="task-parent" onclick="toggleSubTask('stage1')">ä¸€ã€é¡¹ç›®å¯åŠ¨é˜¶æ®µ</td>
                    <td>é¡¹ç›®ç»ç†</td>
                    <td>2026-02-01</td>
                    <td>2026-02-10</td>
                    <td><input type="text" value="0%" disabled></td>
                    <td>å®Œæˆåè¿›å…¥è§„åˆ’é˜¶æ®µ</td>
                </tr>
                <tr class="subtask stage1 task-row" data-id="task1-1" data-name="1.1 é¡¹ç›®éœ€æ±‚ç¡®è®¤" data-leader="äº§å“ç»ç†" data-start="2026-02-01" data-end="2026-02-03" data-progress="0%" data-remark="éœ€ä¸å®¢æˆ·ç¡®è®¤æœ€ç»ˆéœ€æ±‚" data-status="æœªå®Œæˆ">
                    <td><input type="checkbox" class="child-checkbox" data-parent="stage1" disabled></td>
                    <td class="task-child">1.1 é¡¹ç›®éœ€æ±‚ç¡®è®¤</td>
                    <td>äº§å“ç»ç†</td>
                    <td>2026-02-01</td>
                    <td>2026-02-03</td>
                    <td><input type="text" value="0%" disabled></td>
                    <td>éœ€ä¸å®¢æˆ·ç¡®è®¤æœ€ç»ˆéœ€æ±‚</td>
                </tr>
                <tr class="subtask stage1 task-row" data-id="task1-2" data-name="1.2 é¡¹ç›®å›¢é˜Ÿç»„å»º" data-leader="é¡¹ç›®ç»ç†" data-start="2026-02-04" data-end="2026-02-06" data-progress="0%" data-remark="ç¡®å®šå„å²—ä½è´Ÿè´£äºº" data-status="æœªå®Œæˆ">
                    <td><input type="checkbox" class="child-checkbox" data-parent="stage1" disabled></td>
                    <td class="task-child">1.2 é¡¹ç›®å›¢é˜Ÿç»„å»º</td>
                    <td>é¡¹ç›®ç»ç†</td>
                    <td>2026-02-04</td>
                    <td>2026-02-06</td>
                    <td><input type="text" value="0%" disabled></td>
                    <td>ç¡®å®šå„å²—ä½è´Ÿè´£äºº</td>
                </tr>
                <tr class="subtask stage1 task-row" data-id="task1-3" data-name="1.3 é¡¹ç›®å¯åŠ¨ä¼šè®®" data-leader="é¡¹ç›®ç»ç†" data-start="2026-02-07" data-end="2026-02-10" data-progress="0%" data-remark="æ˜ç¡®é¡¹ç›®ç›®æ ‡ä¸åˆ†å·¥" data-status="æœªå®Œæˆ">
                    <td><input type="checkbox" class="child-checkbox" data-parent="stage1" disabled></td>
                    <td class="task-child">1.3 é¡¹ç›®å¯åŠ¨ä¼šè®®</td>
                    <td>é¡¹ç›®ç»ç†</td>
                    <td>2026-02-07</td>
                    <td>2026-02-10</td>
                    <td><input type="text" value="0%" disabled></td>
                    <td>æ˜ç¡®é¡¹ç›®ç›®æ ‡ä¸åˆ†å·¥</td>
                </tr>

                <!-- è§„åˆ’é˜¶æ®µ -->
                <tr class="task-row" data-id="task2" data-name="äºŒã€é¡¹ç›®è§„åˆ’é˜¶æ®µ" data-leader="é¡¹ç›®ç»ç†" data-start="2026-02-11" data-end="2026-02-25" data-progress="0%" data-remark="è¾“å‡ºå®Œæ•´è§„åˆ’æ–¹æ¡ˆ" data-status="æœªå®Œæˆ">
                    <td><input type="checkbox" class="parent-checkbox" data-target="stage2" disabled></td>
                    <td class="task-parent" onclick="toggleSubTask('stage2')">äºŒã€é¡¹ç›®è§„åˆ’é˜¶æ®µ</td>
                    <td>é¡¹ç›®ç»ç†</td>
                    <td>2026-02-11</td>
                    <td>2026-02-25</td>
                    <td><input type="text" value="0%" disabled></td>
                    <td>è¾“å‡ºå®Œæ•´è§„åˆ’æ–¹æ¡ˆ</td>
                </tr>
                <tr class="subtask stage2 task-row" data-id="task2-1" data-name="2.1 é¡¹ç›®è®¡åˆ’åˆ¶å®š" data-leader="é¡¹ç›®ç»ç†" data-start="2026-02-11" data-end="2026-02-15" data-progress="0%" data-remark="å«è¿›åº¦ã€æˆæœ¬ã€é£é™©è®¡åˆ’" data-status="æœªå®Œæˆ">
                    <td><input type="checkbox" class="child-checkbox" data-parent="stage2" disabled></td>
                    <td class="task-child">2.1 é¡¹ç›®è®¡åˆ’åˆ¶å®š</td>
                    <td>é¡¹ç›®ç»ç†</td>
                    <td>2026-02-11</td>
                    <td>2026-02-15</td>
                    <td><input type="text" value="0%" disabled></td>
                    <td>å«è¿›åº¦ã€æˆæœ¬ã€é£é™©è®¡åˆ’</td>
                </tr>
                <tr class="subtask stage2 task-row" data-id="task2-2" data-name="2.2 éœ€æ±‚æ–‡æ¡£ç¼–å†™" data-leader="äº§å“ç»ç†" data-start="2026-02-16" data-end="2026-02-20" data-progress="0%" data-remark="æ–‡æ¡£éœ€å›¢é˜Ÿè¯„å®¡" data-status="æœªå®Œæˆ">
                    <td><input type="checkbox" class="child-checkbox" data-parent="stage2" disabled></td>
                    <td class="task-child">2.2 éœ€æ±‚æ–‡æ¡£ç¼–å†™</td>
                    <td>äº§å“ç»ç†</td>
                    <td>2026-02-16</td>
                    <td>2026-02-20</td>
                    <td><input type="text" value="0%" disabled></td>
                    <td>æ–‡æ¡£éœ€å›¢é˜Ÿè¯„å®¡</td>
                </tr>
                <tr class="subtask stage2 task-row" data-id="task2-3" data-name="2.3 è§„åˆ’æ–¹æ¡ˆè¯„å®¡" data-leader="å…¨ä½“æˆå‘˜" data-start="2026-02-21" data-end="2026-02-25" data-progress="0%" data-remark="ä¿®æ”¹åç¡®è®¤è½åœ°" data-status="æœªå®Œæˆ">
                    <td><input type="checkbox" class="child-checkbox" data-parent="stage2" disabled></td>
                    <td class="task-child">2.3 è§„åˆ’æ–¹æ¡ˆè¯„å®¡</td>
                    <td>å…¨ä½“æˆå‘˜</td>
                    <td>2026-02-21</td>
                    <td>2026-02-25</td>
                    <td><input type="text" value="0%" disabled></td>
                    <td>ä¿®æ”¹åç¡®è®¤è½åœ°</td>
                </tr>

                <!-- æ‰§è¡Œé˜¶æ®µ -->
                <tr class="task-row" data-id="task3" data-name="ä¸‰ã€é¡¹ç›®æ‰§è¡Œé˜¶æ®µ" data-leader="å„æ¨¡å—è´Ÿè´£äºº" data-start="2026-02-26" data-end="2026-04-15" data-progress="0%" data-remark="æ ¸å¿ƒæ‰§è¡Œé˜¶æ®µï¼Œæ¯å‘¨åŒæ­¥" data-status="æœªå®Œæˆ">
                    <td><input type="checkbox" class="parent-checkbox" data-target="stage3" disabled></td>
                    <td class="task-parent" onclick="toggleSubTask('stage3')">ä¸‰ã€é¡¹ç›®æ‰§è¡Œé˜¶æ®µ</td>
                    <td>å„æ¨¡å—è´Ÿè´£äºº</td>
                    <td>2026-02-26</td>
                    <td>2026-04-15</td>
                    <td><input type="text" value="0%" disabled></td>
                    <td>æ ¸å¿ƒæ‰§è¡Œé˜¶æ®µï¼Œæ¯å‘¨åŒæ­¥</td>
                </tr>

                <!-- æµ‹è¯•é˜¶æ®µ -->
                <tr class="task-row" data-id="task4" data-name="å››ã€é¡¹ç›®æµ‹è¯•é˜¶æ®µ" data-leader="æµ‹è¯•å·¥ç¨‹å¸ˆ" data-start="2026-04-16" data-end="2026-04-30" data-progress="0%" data-remark="ä¿®å¤bugå¹¶å›å½’æµ‹è¯•" data-status="æœªå®Œæˆ">
                    <td><input type="checkbox" class="parent-checkbox" data-target="stage4" disabled></td>
                    <td class="task-parent" onclick="toggleSubTask('stage4')">å››ã€é¡¹ç›®æµ‹è¯•é˜¶æ®µ</td>
                    <td>æµ‹è¯•å·¥ç¨‹å¸ˆ</td>
                    <td>2026-04-16</td>
                    <td>2026-04-30</td>
                    <td><input type="text" value="0%" disabled></td>
                    <td>ä¿®å¤bugå¹¶å›å½’æµ‹è¯•</td>
                </tr>

                <!-- éªŒæ”¶é˜¶æ®µ -->
                <tr class="task-row" data-id="task5" data-name="äº”ã€é¡¹ç›®éªŒæ”¶é˜¶æ®µ" data-leader="é¡¹ç›®ç»ç†" data-start="2026-05-01" data-end="2026-05-10" data-progress="0%" data-remark="å®¢æˆ·éªŒæ”¶å¹¶äº¤ä»˜æˆæœ" data-status="æœªå®Œæˆ">
                    <td><input type="checkbox" class="parent-checkbox" data-target="stage5" disabled></td>
                    <td class="task-parent" onclick="toggleSubTask('stage5')">äº”ã€é¡¹ç›®éªŒæ”¶é˜¶æ®µ</td>
                    <td>é¡¹ç›®ç»ç†</td>
                    <td>2026-05-01</td>
                    <td>2026-05-10</td>
                    <td><input type="text" value="0%" disabled></td>
                    <td>å®¢æˆ·éªŒæ”¶å¹¶äº¤ä»˜æˆæœ</td>
                </tr>
            </tbody>
        </table>

        <div class="callout">
            <p>ä½¿ç”¨æç¤ºï¼š1. ä»–äººæ‰“å¼€é»˜è®¤ä»…æŸ¥çœ‹ï¼Œæ— æ³•ä¿®æ”¹è¿›åº¦ã€æ ‡è®°ä»»åŠ¡ï¼›2. ç®¡ç†è€…ç‚¹å‡»ã€Œè§£é”ç¼–è¾‘ã€æŒ‰é’®åï¼Œå¯æ¢å¤æ‰€æœ‰ç¼–è¾‘åŠŸèƒ½ï¼ŒçŠ¶æ€å®æ—¶ä¿å­˜ï¼›3. å­ä»»åŠ¡æŠ˜å /å±•å¼€ã€ä»»åŠ¡è¯¦æƒ…æŸ¥çœ‹åŠŸèƒ½å¯¹æ‰€æœ‰ç”¨æˆ·å¼€æ”¾ï¼›4. ä»…å½“å‰æµè§ˆå™¨å¯ä¿ç•™è§£é”çŠ¶æ€ï¼Œä»–äººè®¾å¤‡éœ€é‡æ–°è§£é”ã€‚</p>
        </div>

        <!-- é“¾æ¥è½¬å‘æ–¹æ¡ˆè¯´æ˜ -->
        <div class="share-tip">
            <h3>ğŸ”— è¡¨æ ¼ç”Ÿæˆé“¾æ¥è½¬å‘æ•™ç¨‹</h3>
            <ul>
                <li><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼šæœ¬åœ°HTMLæ–‡ä»¶æ— æ³•ç›´æ¥ç”Ÿæˆå¯è½¬å‘é“¾æ¥ï¼Œéœ€å…ˆå°†æ–‡ä»¶éƒ¨ç½²åˆ°çº¿ä¸Šï¼ˆäº‘ç›˜/æœåŠ¡å™¨ï¼‰ï¼Œå†ç”Ÿæˆé“¾æ¥è½¬å‘ã€‚</li>
                <li><strong>æ–¹æ¡ˆä¸€ï¼šäº‘ç›˜ç”Ÿæˆé“¾æ¥ï¼ˆæ¨èï¼Œé›¶æˆæœ¬ï¼‰</strong>
                    1. å°†ä¿å­˜å¥½çš„HTMLæ–‡ä»¶ï¼ˆå¦‚â€œé¡¹ç›®è¿›åº¦è¡¨.htmlâ€ï¼‰ä¸Šä¼ è‡³ç™¾åº¦ç½‘ç›˜/é˜¿é‡Œäº‘ç›˜/OneDriveï¼›
                    2. æ‰¾åˆ°æ–‡ä»¶ï¼Œç‚¹å‡»ã€Œåˆ†äº«ã€ï¼Œè®¾ç½®æƒé™ä¸ºã€Œä»…æŸ¥çœ‹/è®¿å®¢å¯ä¸‹è½½ã€ï¼ˆç¦æ­¢è®¾ä¸ºå¯ç¼–è¾‘ï¼‰ï¼›
                    3. ç”Ÿæˆåˆ†äº«é“¾æ¥ï¼Œå¤åˆ¶åè½¬å‘ç»™ä»–äººï¼Œå¯¹æ–¹ç‚¹å‡»é“¾æ¥å¯ä¸‹è½½æ–‡ä»¶æˆ–åœ¨çº¿é¢„è§ˆï¼ˆä¸»æµäº‘ç›˜å‡æ”¯æŒHTMLé¢„è§ˆï¼‰ã€‚
                </li>
                <li><strong>æ–¹æ¡ˆäºŒï¼šå±€åŸŸç½‘ä¸´æ—¶é“¾æ¥ï¼ˆé€‚åˆå†…éƒ¨å›¢é˜Ÿï¼‰</strong>
                    1. ç”µè„‘å®‰è£…Python/Node.jsï¼Œæ‰“å¼€å‘½ä»¤è¡Œè¿›å…¥HTMLæ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹ï¼›
                    2. Pythonç”¨æˆ·è¾“å…¥å‘½ä»¤ï¼š<code>python -m http.server 8080</code>ï¼›Node.jsç”¨æˆ·è¾“å…¥ï¼š<code>http-server -p 8080</code>ï¼›
                    3. æŸ¥çœ‹è‡ªå·±ç”µè„‘çš„å±€åŸŸç½‘IPï¼ˆå¦‚192.168.1.100ï¼‰ï¼Œç”Ÿæˆé“¾æ¥ï¼š<code>http://ä½ çš„IP:8080/é¡¹ç›®è¿›åº¦è¡¨.html</code>ï¼›
                    4. è½¬å‘è¯¥é“¾æ¥ç»™åŒä¸€å±€åŸŸç½‘å†…çš„äººï¼Œå¯¹æ–¹æµè§ˆå™¨æ‰“å¼€å³å¯æŸ¥çœ‹ï¼Œä½ ä¿®æ”¹æ–‡ä»¶åå¯¹æ–¹åˆ·æ–°å³åŒæ­¥ã€‚
                </li>
                <li><strong>æ–¹æ¡ˆä¸‰ï¼šå…è´¹é™æ€æ‰˜ç®¡ï¼ˆé•¿æœŸå¯ç”¨ï¼‰</strong>
                    1. æ³¨å†ŒGitHub/Giteeè´¦å·ï¼Œåˆ›å»ºå…¬å¼€ä»“åº“ï¼Œä¸Šä¼ HTMLæ–‡ä»¶ï¼›
                    2. å¼€å¯é™æ€é¡µé¢æœåŠ¡ï¼ˆGitHub Pages/Gitee Pagesï¼‰ï¼Œç”Ÿæˆå…¬å¼€è®¿é—®é“¾æ¥ï¼›
                    3. è½¬å‘é“¾æ¥ç»™ä»–äººï¼Œå…¨çƒå¯è®¿é—®ï¼Œä½ æ›´æ–°ä»“åº“æ–‡ä»¶åé“¾æ¥å†…å®¹è‡ªåŠ¨åŒæ­¥ã€‚
                </li>
                <li><strong>æ³¨æ„äº‹é¡¹</strong>ï¼šæ‰€æœ‰æ–¹æ¡ˆè½¬å‘åï¼Œä»–äººå‡é»˜è®¤ã€Œä»…æŸ¥çœ‹ã€æƒé™ï¼Œä»…ä½ å¯åœ¨æœ¬åœ°è§£é”ç¼–è¾‘ï¼Œæ•°æ®å®‰å…¨å¯æ§ã€‚</li>
            </ul>
        </div>
    </div>

    <!-- è¯¦æƒ…å¼¹çª— -->
    <div class="detail-modal" id="detailModal">
        <div class="modal-content">
            <h3 class="modal-title" id="modalTitle">ä»»åŠ¡è¯¦æƒ…</h3>
            <div class="modal-info"><span>è´Ÿè´£äººï¼š</span><span id="modalLeader"></span></div>
            <div class="modal-info"><span>è®¡åˆ’å¼€å§‹æ—¶é—´ï¼š</span><span id="modalStart"></span></div>
            <div class="modal-info"><span>è®¡åˆ’ç»“æŸæ—¶é—´ï¼š</span><span id="modalEnd"></span></div>
            <div class="modal-info"><span>å®é™…è¿›åº¦ï¼š</span><span id="modalProgress"></span></div>
            <div class="modal-info"><span>å®ŒæˆçŠ¶æ€ï¼š</span><span id="modalStatus"></span></div>
            <div class="modal-info" style="margin-top: 15px;"><span>å¤‡æ³¨ï¼š</span><span id="modalRemark"></span></div>
            <button class="close-modal" onclick="closeModal()">å…³é—­</button>
        </div>
    </div>

    <script>
        // å­ä»»åŠ¡æŠ˜å /å±•å¼€åŠŸèƒ½
        function toggleSubTask(stage) {
            const subtasks = document.querySelectorAll(`.subtask.${stage}`);
            const parentTask = document.querySelector(`.task-parent[onclick="toggleSubTask('${stage}')"]`);
            subtasks.forEach(task => {
                task.style.display = task.style.display === 'none' ? '' : 'none';
            });
            parentTask.classList.toggle('collapsed');
        }

        // è§£é”ç¼–è¾‘æƒé™
        function unlockEdit() {
            const table = document.getElementById('taskTable');
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const progressInputs = document.querySelectorAll('input[type="text"]');
            const authMode = document.getElementById('authMode');
            const unlockBtn = document.getElementById('unlockBtn');

            // åˆ‡æ¢ä¸ºç¼–è¾‘æ¨¡å¼
            table.classList.remove('view-mode');
            checkboxes.forEach(cb => cb.disabled = false);
            progressInputs.forEach(input => input.disabled = false);
            authMode.textContent = 'å¯ç¼–è¾‘';
            unlockBtn.textContent = 'å·²è§£é”';
            unlockBtn.disabled = true;
            unlockBtn.style.backgroundColor = '#48bb78';

            // åŠ è½½æœ¬åœ°å­˜å‚¨çŠ¶æ€å¹¶ç»‘å®šç¼–è¾‘äº‹ä»¶
            loadTaskStatus();
            bindEditEvents();
        }

        // ç»‘å®šç¼–è¾‘ç›¸å…³äº‹ä»¶
        function bindEditEvents() {
            // çˆ¶å¤é€‰æ¡†è”åŠ¨å­å¤é€‰æ¡†
            document.querySelectorAll('.parent-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const target = this.getAttribute('data-target');
                    const childCheckboxes = document.querySelectorAll(`.child-checkbox[data-parent="${target}"]`);
                    childCheckboxes.forEach(child => {
                        child.checked = this.checked;
                        updateTaskStyle(child);
                        const taskRow = child.closest('.task-row');
                        taskRow.setAttribute('data-status', child.checked ? 'å·²å®Œæˆ' : 'æœªå®Œæˆ');
                    });
                    updateTaskStyle(this);
                    const taskRow = this.closest('.task-row');
                    taskRow.setAttribute('data-status', this.checked ? 'å·²å®Œæˆ' : 'æœªå®Œæˆ');
                    saveTaskStatus();
                });
            });

            // å­å¤é€‰æ¡†è”åŠ¨çˆ¶å¤é€‰æ¡†
            document.querySelectorAll('.child-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const parent = this.getAttribute('data-parent');
                    const parentCheckbox = document.querySelector(`.parent-checkbox[data-target="${parent}"]`);
                    const siblingCheckboxes = document.querySelectorAll(`.child-checkbox[data-parent="${parent}"]`);
                    const allChecked = Array.from(siblingCheckboxes).every(cb => cb.checked);
                    parentCheckbox.checked = allChecked;
                    updateTaskStyle(this);
                    updateTaskStyle(parentCheckbox);
                    const childRow = this.closest('.task-row');
                    childRow.setAttribute('data-status', this.checked ? 'å·²å®Œæˆ' : 'æœªå®Œæˆ');
                    const parentRow = parentCheckbox.closest('.task-row');
                    parentRow.setAttribute('data-status', allChecked ? 'å·²å®Œæˆ' : 'æœªå®Œæˆ');
                    saveTaskStatus();
                });
            });

            // è¿›åº¦å€¼ä¿®æ”¹ä¸ä¿å­˜
            document.querySelectorAll('td input[type="text"]').forEach(input => {
                input.addEventListener('input', function() {
                    this.value = this.value.replace(/[^0-9%]/g, '');
                    if (!this.value.includes('%')) this.value += '%';
                    const taskRow = this.closest('.task-row');
                    taskRow.setAttribute('data-progress', this.value);
                    saveTaskStatus();
                });
            });
        }

        // æ‰“å¼€è¯¦æƒ…å¼¹çª—
        document.querySelectorAll('.task-row').forEach(row => {
            row.addEventListener('click', function(e) {
                if (e.target.classList.contains('task-parent') || e.target.type === 'checkbox' || e.target.type === 'text') return;
                const taskName = this.getAttribute('data-name');
                const taskLeader = this.getAttribute('data-leader');
                const taskStart = this.getAttribute('data-start');
                const taskEnd = this.getAttribute('data-end');
                const taskProgress = this.getAttribute('data-progress');
                const taskStatus = this.getAttribute('data-status');
                const taskRemark = this.getAttribute('data-remark');

                document.getElementById('modalTitle').textContent = `ä»»åŠ¡è¯¦æƒ…ï¼š${taskName}`;
                document.getElementById('modalLeader').textContent = taskLeader;
                document.getElementById('modalStart').textContent = taskStart;
                document.getElementById('modalEnd').textContent = taskEnd;
                document.getElementById('modalProgress').textContent = taskProgress;
                document.getElementById('modalStatus').textContent = taskStatus;
                document.getElementById('modalRemark').textContent = taskRemark;

                document.getElementById('detailModal').style.display = 'flex';
            });
        });

        // å…³é—­è¯¦æƒ…å¼¹çª—
        function closeModal() {
            document.getElementById('detailModal').style.display = 'none';
        }

        // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
        window.addEventListener('click', function(e) {
            const modal = document.getElementById('detailModal');
            if (e.target === modal) {
                closeModal();
            }
        });

        // æ›´æ–°ä»»åŠ¡æ ·å¼ï¼ˆå®ŒæˆçŠ¶æ€ï¼‰
        function updateTaskStyle(checkbox) {
            const row = checkbox.closest('tr');
            const taskName = row.querySelector('td:nth-child(2)');
            if (checkbox.checked) {
                taskName.classList.add('task-done');
            } else {
                taskName.classList.remove('task-done');
            }
        }

        // ä¿å­˜ä»»åŠ¡çŠ¶æ€åˆ°æœ¬åœ°å­˜å‚¨
        function saveTaskStatus() {
            const status = {};
            document.querySelectorAll('.task-row').forEach(row => {
                const taskId = row.getAttribute('data-id');
                const checkbox = row.querySelector('input[type="checkbox"]');
                status[taskId] = {
                    checked: checkbox ? checkbox.checked : false,
                    progress: row.getAttribute('data-progress'),
                    status: row.getAttribute('data-status')
                };
            });
            localStorage.setItem('projectTaskStatus', JSON.stringify(status));
        }

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½ä»»åŠ¡çŠ¶æ€
        function loadTaskStatus() {
            const status = JSON.parse(localStorage.getItem('projectTaskStatus') || '{}');
            document.querySelectorAll('.task-row').forEach(row => {
                const taskId = row.getAttribute('data-id');
                const checkbox = row.querySelector('input[type="checkbox"]');
                const progressInput = row.querySelector('input[type="text"]');
                if (status[taskId]) {
                    if (checkbox) checkbox.checked = status[taskId].checked;
                    if (progressInput) progressInput.value = status[taskId].progress;
                    row.setAttribute('data-progress', status[taskId].progress);
                    row.setAttribute('data-status', status[taskId].status);
                    if (checkbox) updateTaskStyle(checkbox);
                }
            });
        }

        // é¡µé¢åŠ è½½åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–å¼¹çª—å…³é—­äº‹ä»¶
            document.getElementById('closeModal').addEventListener('click', closeModal);
        });
    </script>
</body>
</html>